<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Kotlin 技术月报 | 2025 年 1 月 | 北京 KUG</title><meta name=keywords content="技术月报"><meta name=description content="为了帮助社区的小伙伴们更好地了解 Kotlin 相关的最新动态，我们决定使用月报的形式，整理展示最近一个月的 Kotlin 技术动态。
月报的主要内容包括：整理展示最近一个月的最新技术动态，精选博客，精选视频以及社区活动等方面的信息。
最新动态 Kotlin 2.1.20-Beta1 已发布 What&rsquo;s new in Kotlin 2.1.20-Beta1
IDE 支持：支持 2.1.20-Beta1 的 Kotlin 插件捆绑在最新的 IntelliJ IDEA 和 Android Studio 中，无需在 IDE 中更新插件，只需在构建脚本中更改 Kotlin 版本为 2.1.20-Beta1。 Kotlin K2 编译器新特性：从 Kotlin 2.1.20-Beta1 开始，K2 实现的 kapt 编译器插件对所有项目默认启用。自 Kotlin 1.9.20 推出新的 kapt 插件实现以来，团队不断改进其内部实现，使其行为与 K1 kapt 相似并显著提高性能，遇到问题可暂时恢复到以前的插件实现并向问题跟踪器报告。 Gradle 支持情况：Kotlin 2.1.20-Beta1 与最新稳定版 Gradle 8.11 兼容并支持其功能，Gradle 8.7 至 8.11 版本均受支持，但使用 Kotlin 多平台 Gradle 插件时在 JVM 目标中调用 withJava () 函数可能会出现弃用警告，团队计划尽快修复。 此外 Kotlin 2."><meta name=author content="beijing-kug"><link rel=canonical href=https://beijing-kug.github.io/news/kotlin-news-2025-01/><link crossorigin=anonymous href=/assets/css/stylesheet.8f39c56ff9c568320c772f590aacdf29f8e8f17c0d9623de1a80621f8b933a96.css integrity="sha256-jznFb/nFaDIMdy9ZCqzfKfjo8XwNliPeGoBiH4uTOpY=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://beijing-kug.github.io/kug-logo.png><link rel=icon type=image/png sizes=16x16 href=https://beijing-kug.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://beijing-kug.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://beijing-kug.github.io/apple-touch-icon.png><link rel=mask-icon href=https://beijing-kug.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Kotlin 技术月报 | 2025 年 1 月"><meta property="og:description" content="为了帮助社区的小伙伴们更好地了解 Kotlin 相关的最新动态，我们决定使用月报的形式，整理展示最近一个月的 Kotlin 技术动态。
月报的主要内容包括：整理展示最近一个月的最新技术动态，精选博客，精选视频以及社区活动等方面的信息。
最新动态 Kotlin 2.1.20-Beta1 已发布 What&rsquo;s new in Kotlin 2.1.20-Beta1
IDE 支持：支持 2.1.20-Beta1 的 Kotlin 插件捆绑在最新的 IntelliJ IDEA 和 Android Studio 中，无需在 IDE 中更新插件，只需在构建脚本中更改 Kotlin 版本为 2.1.20-Beta1。 Kotlin K2 编译器新特性：从 Kotlin 2.1.20-Beta1 开始，K2 实现的 kapt 编译器插件对所有项目默认启用。自 Kotlin 1.9.20 推出新的 kapt 插件实现以来，团队不断改进其内部实现，使其行为与 K1 kapt 相似并显著提高性能，遇到问题可暂时恢复到以前的插件实现并向问题跟踪器报告。 Gradle 支持情况：Kotlin 2.1.20-Beta1 与最新稳定版 Gradle 8.11 兼容并支持其功能，Gradle 8.7 至 8.11 版本均受支持，但使用 Kotlin 多平台 Gradle 插件时在 JVM 目标中调用 withJava () 函数可能会出现弃用警告，团队计划尽快修复。 此外 Kotlin 2."><meta property="og:type" content="article"><meta property="og:url" content="https://beijing-kug.github.io/news/kotlin-news-2025-01/"><meta property="article:section" content="news"><meta property="article:published_time" content="2025-01-30T00:00:00+00:00"><meta property="article:modified_time" content="2025-01-30T00:00:00+00:00"><meta property="og:site_name" content="北京 KUG"><meta name=twitter:card content="summary"><meta name=twitter:title content="Kotlin 技术月报 | 2025 年 1 月"><meta name=twitter:description content="为了帮助社区的小伙伴们更好地了解 Kotlin 相关的最新动态，我们决定使用月报的形式，整理展示最近一个月的 Kotlin 技术动态。
月报的主要内容包括：整理展示最近一个月的最新技术动态，精选博客，精选视频以及社区活动等方面的信息。
最新动态 Kotlin 2.1.20-Beta1 已发布 What&rsquo;s new in Kotlin 2.1.20-Beta1
IDE 支持：支持 2.1.20-Beta1 的 Kotlin 插件捆绑在最新的 IntelliJ IDEA 和 Android Studio 中，无需在 IDE 中更新插件，只需在构建脚本中更改 Kotlin 版本为 2.1.20-Beta1。 Kotlin K2 编译器新特性：从 Kotlin 2.1.20-Beta1 开始，K2 实现的 kapt 编译器插件对所有项目默认启用。自 Kotlin 1.9.20 推出新的 kapt 插件实现以来，团队不断改进其内部实现，使其行为与 K1 kapt 相似并显著提高性能，遇到问题可暂时恢复到以前的插件实现并向问题跟踪器报告。 Gradle 支持情况：Kotlin 2.1.20-Beta1 与最新稳定版 Gradle 8.11 兼容并支持其功能，Gradle 8.7 至 8.11 版本均受支持，但使用 Kotlin 多平台 Gradle 插件时在 JVM 目标中调用 withJava () 函数可能会出现弃用警告，团队计划尽快修复。 此外 Kotlin 2."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"News","item":"https://beijing-kug.github.io/news/"},{"@type":"ListItem","position":2,"name":"Kotlin 技术月报 | 2025 年 1 月","item":"https://beijing-kug.github.io/news/kotlin-news-2025-01/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Kotlin 技术月报 | 2025 年 1 月","name":"Kotlin 技术月报 | 2025 年 1 月","description":"为了帮助社区的小伙伴们更好地了解 Kotlin 相关的最新动态，我们决定使用月报的形式，整理展示最近一个月的 Kotlin 技术动态。\n月报的主要内容包括：整理展示最近一个月的最新技术动态，精选博客，精选视频以及社区活动等方面的信息。\n最新动态 Kotlin 2.1.20-Beta1 已发布 What\u0026rsquo;s new in Kotlin 2.1.20-Beta1\nIDE 支持：支持 2.1.20-Beta1 的 Kotlin 插件捆绑在最新的 IntelliJ IDEA 和 Android Studio 中，无需在 IDE 中更新插件，只需在构建脚本中更改 Kotlin 版本为 2.1.20-Beta1。 Kotlin K2 编译器新特性：从 Kotlin 2.1.20-Beta1 开始，K2 实现的 kapt 编译器插件对所有项目默认启用。自 Kotlin 1.9.20 推出新的 kapt 插件实现以来，团队不断改进其内部实现，使其行为与 K1 kapt 相似并显著提高性能，遇到问题可暂时恢复到以前的插件实现并向问题跟踪器报告。 Gradle 支持情况：Kotlin 2.1.20-Beta1 与最新稳定版 Gradle 8.11 兼容并支持其功能，Gradle 8.7 至 8.11 版本均受支持，但使用 Kotlin 多平台 Gradle 插件时在 JVM 目标中调用 withJava () 函数可能会出现弃用警告，团队计划尽快修复。 此外 Kotlin 2.","keywords":["技术月报"],"articleBody":"为了帮助社区的小伙伴们更好地了解 Kotlin 相关的最新动态，我们决定使用月报的形式，整理展示最近一个月的 Kotlin 技术动态。\n月报的主要内容包括：整理展示最近一个月的最新技术动态，精选博客，精选视频以及社区活动等方面的信息。\n最新动态 Kotlin 2.1.20-Beta1 已发布 What’s new in Kotlin 2.1.20-Beta1\nIDE 支持：支持 2.1.20-Beta1 的 Kotlin 插件捆绑在最新的 IntelliJ IDEA 和 Android Studio 中，无需在 IDE 中更新插件，只需在构建脚本中更改 Kotlin 版本为 2.1.20-Beta1。 Kotlin K2 编译器新特性：从 Kotlin 2.1.20-Beta1 开始，K2 实现的 kapt 编译器插件对所有项目默认启用。自 Kotlin 1.9.20 推出新的 kapt 插件实现以来，团队不断改进其内部实现，使其行为与 K1 kapt 相似并显著提高性能，遇到问题可暂时恢复到以前的插件实现并向问题跟踪器报告。 Gradle 支持情况：Kotlin 2.1.20-Beta1 与最新稳定版 Gradle 8.11 兼容并支持其功能，Gradle 8.7 至 8.11 版本均受支持，但使用 Kotlin 多平台 Gradle 插件时在 JVM 目标中调用 withJava () 函数可能会出现弃用警告，团队计划尽快修复。 此外 Kotlin 2.1.10-RC2 也已于近期发布，详情信息可见：https://github.com/JetBrains/kotlin/releases\n新版本 IDE 的启动速度变快了？原来是在背后做了这些！｜ 技术解析 打开项目时也许是开发者需要等待的最常见场景。IntelliJ IDEA 需要加载和同步项目、执行索引编制以及完成许多其他小任务才能启用所有实用功能。\n本文介绍了在新版本 IntelliJ IDEA 中为提高性能而采取的措施，包括通过技术改进优化 IDE 性能，分阶段同步索引编制等方式优化用户性能。通过以上优化，大约 30% 的用户认为 IntelliJ IDEA 2024.2 让他们能够更快开始编码。\n精选博客 Kotlin Multiplatform 2024 年总结，Kotlin 崛起的一年 2024 年是 KMP 崛起的一年，这篇文章回顾了 2024 年 Kotlin Multiplatform（KMP）的发展。\n社区支持：2024 年 Google I/O 官宣支持 KMP 项目，由 JetBrains 主导开发，Google Workspace 投资支持。 库支持拓展：2024 年众多 Jetpack 库新增 Kotlin 多平台支持，涵盖网络、数据处理等领域。 版本更新：年初 Kotlin/Wasm 发布 Alpha 版，Compose Multiplatform 同步支持；Compose Multiplatform 1.6.10 及后续版本有 iOS、Web、编译器等更新；Kotlin 2.0 引入 K2 编译器，IntelliJ IDEA 2024.3 的 K2 模式进入稳定阶段。 工具革新：KMP 未来将用基于 JetBrains Fleet 定制的独立 IDE，klibs.io 平台发布，用于搜索 KMP 库。 鸿蒙适配：2024 年 Kotlin 中文开发者大会讨论 KMP 适配鸿蒙，官方研究相关方案，有 Kotlin/JS 和 Kotlin/Native 两种适配思路待确定。 未来展望：2025 年 JetBrains 将强化 KMP 生态，涉及升级 iOS 版本、支持 Kotlin 转 Swift 及发布独立 IDE 等。 初探 Kotlin Multiplatform Mobile 跨平台原理 文章围绕 Kotlin Multiplatform Mobile（KMM）跨平台原理展开，涵盖开发流程、编译产物、文件解析、平台关系等内容，具体如下：\n开发流程：在 CommonMain 用expect定义不同平台有差异的接口，在各具体平台以actual实现，之后编译、打包、发布，宿主依类型依赖对应仓库。 Common 层产物：包含kotlin-tooling-metadata.json、source.jar、.jar和.module等文件，.module关联 Common 层与具体平台产物信息。 具体平台产物：以 iOS 平台为例，.module文件描述产物属性、依赖和文件信息 ，其编译产物有metadata.jar和.klib。 关键文件解析：.klib存放ir等，.knm由.kt经特定流程生成，记录元数据，可用 IDEA 查看 。 iOS 与 KMM 库关系：iOS 依赖.h和二进制文件，KMM 通过cinterop等工具实现与 OC 的互操作，将.klib处理成 iOS 可用的.framework。 绝大多数人想不到的 MMKV 封装思路 文章主要介绍了 MMKV 在 Kotlin 中的封装思路与实现，形成 MMKV-KTX 库，具体如下：\n支持 StateFlow 类型：借鉴 LiveData 的封装方式，通过自定义委托类，重写 MutableStateFlow 读写及相关函数，结合 MMKV 缓存逻辑，实现对 StateFlow 的支持，使数据变化可通知 UI，还可使用 Flow 操作符。 支持 getAllKV ()：针对 MMKV 不支持 getAll () 获取键值对的问题，利用属性委托时的属性名和类型信息，通过反射实现 getAllKV ()。同时处理了懒加载属性误判问题，确保获取的数据准确。 支持 Map 用法：提出用操作 Map 方式读写 MMKV 数据，对比存 JSON 字符串和给 key 加后缀两种方案，选择后者。通过特定方式获取历史数据，处理增删查改及迭代器操作，重写 equals () 函数，实现 Map 用法。 MMKV-KTX 库介绍：MMKV-KTX 库具备自动初始化、类型安全等特性，支持多种数据类型，可转换为 LiveData、StateFlow、Map，还支持 getAllKV ()。给出了添加依赖和使用示例。 fun IMMKVOwner.getAllKV(): Map\u003cString, Any?\u003e = buildMap { this@getAllKV::class.memberProperties .filterIsInstance\u003cKProperty1\u003cIMMKVOwner, *\u003e\u003e() .forEach { property -\u003e property.isAccessible = true this[property.name] = property.get(this@getAllKV) property.isAccessible = false } } Compose 编译器插件原理介绍 Reverse-Engineering the Compose Compiler Plugin: Intercepting the Frontend\n本文主要介绍了 Jetpack Compose 编译器插件如何改变 Kotlin 编译器的规则，包括在不同编译阶段的作用以及如何拦截编译行为等内容。\nJetpack Compose 编译器插件与 Kotlin 编译器的关系：Jetpack Compose 编译器插件会向 IDE 发送诊断信息以提供用户反馈，通过拦截 Kotlin 编译器的代码编译和运行时行为来实现其功能。 Kotlin 编译器：着重探讨较新的 FIR 前端（k2 编译器），其通过重复编译优化数据格式。 插件架构：参考 2018 年 Kevin Most 演讲，介绍了编译器插件架构的构成部分。 Compose 插件结构：已转移到 Kotlin 仓库，分析其文件结构及前后端职责。 插件拦截功能：可在 Kotlin 编译器前后端拦截编译，以特定代码为例说明不同阶段作用。 IDE 错误提示：解析阶段后，FIR 将信息发送至 IDE 插件，提供如 “Composable main functions are not currently supported” 等实时错误提示。 社区活动 Kotlin 中文开发者大会视频回放 Kotlin 中文开发者大会视频回放已发布，欢迎点击以下链接观看：\n腾讯视频使用 KMP Compose 适配鸿蒙的实践 BiliBili 的鸿蒙之路：从 Kotlin/JS 到 Kotlin/Native 的进化之路 快手团队的 KMP 鸿蒙落地实践 NTCompose：一个基于 KMP 及 Compose 范式和原生渲染的多平台开发框架 ","wordCount":"372","inLanguage":"en","datePublished":"2025-01-30T00:00:00Z","dateModified":"2025-01-30T00:00:00Z","author":{"@type":"Person","name":"beijing-kug"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://beijing-kug.github.io/news/kotlin-news-2025-01/"},"publisher":{"@type":"Organization","name":"北京 KUG","logo":{"@type":"ImageObject","url":"https://beijing-kug.github.io/kug-logo.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://beijing-kug.github.io/ accesskey=h title="北京 KUG (Alt + H)">北京 KUG</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://beijing-kug.github.io/events/ title=分享会><span>分享会</span></a></li><li><a href=https://mp.weixin.qq.com/s/GNlbZ6xpCGB1EGML_W4kOg title="加入 KUG"><span>加入 KUG</span></a></li><li><a href=https://www.kotlincn.net/ title=中文文档><span>中文文档</span></a></li><li><a href=https://beijing-kug.github.io/news/ title=技术月报><span>技术月报</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://beijing-kug.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://beijing-kug.github.io/news/>News</a></div><h1 class=post-title>Kotlin 技术月报 | 2025 年 1 月</h1><div class=post-meta><span title='2025-01-30 00:00:00 +0000 UTC'>January 30, 2025</span>&nbsp;·&nbsp;beijing-kug</div></header><div class=post-content><p>为了帮助社区的小伙伴们更好地了解 Kotlin 相关的最新动态，我们决定使用月报的形式，整理展示最近一个月的 Kotlin 技术动态。</p><p>月报的主要内容包括：整理展示最近一个月的最新技术动态，精选博客，精选视频以及社区活动等方面的信息。</p><h2 id=最新动态>最新动态<a hidden class=anchor aria-hidden=true href=#最新动态>#</a></h2><h3 id=kotlin-2120-beta1-已发布>Kotlin 2.1.20-Beta1 已发布<a hidden class=anchor aria-hidden=true href=#kotlin-2120-beta1-已发布>#</a></h3><p><a href=https://kotlinlang.org/docs/whatsnew-eap.html>What&rsquo;s new in Kotlin 2.1.20-Beta1</a></p><ul><li>IDE 支持：支持 2.1.20-Beta1 的 Kotlin 插件捆绑在最新的 IntelliJ IDEA 和 Android Studio 中，无需在 IDE 中更新插件，只需在构建脚本中更改 Kotlin 版本为 2.1.20-Beta1。</li><li>Kotlin K2 编译器新特性：从 Kotlin 2.1.20-Beta1 开始，K2 实现的 kapt 编译器插件对所有项目默认启用。自 Kotlin 1.9.20 推出新的 kapt 插件实现以来，团队不断改进其内部实现，使其行为与 K1 kapt 相似并显著提高性能，遇到问题可暂时恢复到以前的插件实现并向问题跟踪器报告。</li><li>Gradle 支持情况：Kotlin 2.1.20-Beta1 与最新稳定版 Gradle 8.11 兼容并支持其功能，Gradle 8.7 至 8.11 版本均受支持，但使用 Kotlin 多平台 Gradle 插件时在 JVM 目标中调用 withJava () 函数可能会出现弃用警告，团队计划尽快修复。</li></ul><p>此外 Kotlin 2.1.10-RC2 也已于近期发布，详情信息可见：<a href=https://github.com/JetBrains/kotlin/releases>https://github.com/JetBrains/kotlin/releases</a></p><h3 id=新版本-ide-的启动速度变快了原来是在背后做了这些-技术解析httpsmpweixinqqcomsgucwytw3de5oc0txy4_gkg><a href=https://mp.weixin.qq.com/s/GUcWyTW3De5oC0Txy4_gkg>新版本 IDE 的启动速度变快了？原来是在背后做了这些！｜ 技术解析</a><a hidden class=anchor aria-hidden=true href=#新版本-ide-的启动速度变快了原来是在背后做了这些-技术解析httpsmpweixinqqcomsgucwytw3de5oc0txy4_gkg>#</a></h3><p>打开项目时也许是开发者需要等待的最常见场景。IntelliJ IDEA 需要加载和同步项目、执行索引编制以及完成许多其他小任务才能启用所有实用功能。</p><p>本文介绍了在新版本 IntelliJ IDEA 中为提高性能而采取的措施，包括通过技术改进优化 IDE 性能，分阶段同步索引编制等方式优化用户性能。通过以上优化，大约 30% 的用户认为 IntelliJ IDEA 2024.2 让他们能够更快开始编码。</p><p><img loading=lazy src=https://raw.gitmirror.com/RicardoJiang/resource/refs/heads/main/2025/january/p11.webp alt></p><h2 id=精选博客>精选博客<a hidden class=anchor aria-hidden=true href=#精选博客>#</a></h2><h3 id=kotlin-multiplatform-2024-年总结kotlin-崛起的一年httpsmpweixinqqcomsc6ixwvcoyspyvae9qafxyg><a href=https://mp.weixin.qq.com/s/C6iXWvcOySPYVAE9QaFxYg>Kotlin Multiplatform 2024 年总结，Kotlin 崛起的一年</a><a hidden class=anchor aria-hidden=true href=#kotlin-multiplatform-2024-年总结kotlin-崛起的一年httpsmpweixinqqcomsc6ixwvcoyspyvae9qafxyg>#</a></h3><p>2024 年是 KMP 崛起的一年，这篇文章回顾了 2024 年 Kotlin Multiplatform（KMP）的发展。</p><ul><li>社区支持：2024 年 Google I/O 官宣支持 KMP 项目，由 JetBrains 主导开发，Google Workspace 投资支持。</li><li>库支持拓展：2024 年众多 Jetpack 库新增 Kotlin 多平台支持，涵盖网络、数据处理等领域。</li><li>版本更新：年初 Kotlin/Wasm 发布 Alpha 版，Compose Multiplatform 同步支持；Compose Multiplatform 1.6.10 及后续版本有 iOS、Web、编译器等更新；Kotlin 2.0 引入 K2 编译器，IntelliJ IDEA 2024.3 的 K2 模式进入稳定阶段。</li><li>工具革新：KMP 未来将用基于 JetBrains Fleet 定制的独立 IDE，klibs.io 平台发布，用于搜索 KMP 库。</li><li>鸿蒙适配：2024 年 Kotlin 中文开发者大会讨论 KMP 适配鸿蒙，官方研究相关方案，有 Kotlin/JS 和 Kotlin/Native 两种适配思路待确定。</li><li>未来展望：2025 年 JetBrains 将强化 KMP 生态，涉及升级 iOS 版本、支持 Kotlin 转 Swift 及发布独立 IDE 等。</li></ul><p><img loading=lazy src=https://raw.gitmirror.com/RicardoJiang/resource/refs/heads/main/2025/january/p4.webp alt></p><h3 id=初探-kotlin-multiplatform-mobile-跨平台原理httpsjuejincnpost7214412608400212028><a href=https://juejin.cn/post/7214412608400212028>初探 Kotlin Multiplatform Mobile 跨平台原理</a><a hidden class=anchor aria-hidden=true href=#初探-kotlin-multiplatform-mobile-跨平台原理httpsjuejincnpost7214412608400212028>#</a></h3><p>文章围绕 Kotlin Multiplatform Mobile（KMM）跨平台原理展开，涵盖开发流程、编译产物、文件解析、平台关系等内容，具体如下：</p><ul><li>开发流程：在 CommonMain 用expect定义不同平台有差异的接口，在各具体平台以actual实现，之后编译、打包、发布，宿主依类型依赖对应仓库。</li><li>Common 层产物：包含kotlin-tooling-metadata.json、source.jar、.jar和.module等文件，.module关联 Common 层与具体平台产物信息。</li><li>具体平台产物：以 iOS 平台为例，.module文件描述产物属性、依赖和文件信息 ，其编译产物有metadata.jar和.klib。</li><li>关键文件解析：.klib存放ir等，.knm由.kt经特定流程生成，记录元数据，可用 IDEA 查看 。</li><li>iOS 与 KMM 库关系：iOS 依赖.h和二进制文件，KMM 通过cinterop等工具实现与 OC 的互操作，将.klib处理成 iOS 可用的.framework。</li></ul><p><img loading=lazy src=https://raw.gitmirror.com/RicardoJiang/resource/refs/heads/main/2025/january/p5.webp alt></p><h3 id=绝大多数人想不到的-mmkv-封装思路httpsjuejincnpost7444856714337681459><a href=https://juejin.cn/post/7444856714337681459>绝大多数人想不到的 MMKV 封装思路</a><a hidden class=anchor aria-hidden=true href=#绝大多数人想不到的-mmkv-封装思路httpsjuejincnpost7444856714337681459>#</a></h3><p>文章主要介绍了 MMKV 在 Kotlin 中的封装思路与实现，形成 MMKV-KTX 库，具体如下：</p><ul><li>支持 StateFlow 类型：借鉴 LiveData 的封装方式，通过自定义委托类，重写 MutableStateFlow 读写及相关函数，结合 MMKV 缓存逻辑，实现对 StateFlow 的支持，使数据变化可通知 UI，还可使用 Flow 操作符。</li><li>支持 getAllKV ()：针对 MMKV 不支持 getAll () 获取键值对的问题，利用属性委托时的属性名和类型信息，通过反射实现 getAllKV ()。同时处理了懒加载属性误判问题，确保获取的数据准确。</li><li>支持 Map 用法：提出用操作 Map 方式读写 MMKV 数据，对比存 JSON 字符串和给 key 加后缀两种方案，选择后者。通过特定方式获取历史数据，处理增删查改及迭代器操作，重写 equals () 函数，实现 Map 用法。</li><li>MMKV-KTX 库介绍：MMKV-KTX 库具备自动初始化、类型安全等特性，支持多种数据类型，可转换为 LiveData、StateFlow、Map，还支持 getAllKV ()。给出了添加依赖和使用示例。</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>fun</span> <span class=nf>IMMKVOwner</span><span class=p>.</span><span class=n>getAllKV</span><span class=p>():</span> <span class=n>Map</span><span class=p>&lt;</span><span class=n>String</span><span class=p>,</span> <span class=n>Any</span><span class=p>?&gt;</span> <span class=p>=</span> <span class=n>buildMap</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=nd>@getAllKV</span><span class=o>::</span><span class=k>class</span><span class=p>.</span><span class=n>memberProperties</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=n>filterIsInstance</span><span class=p>&lt;</span><span class=n>KProperty1</span><span class=p>&lt;</span><span class=n>IMMKVOwner</span><span class=p>,</span> <span class=p>*&gt;&gt;()</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=n>forEach</span> <span class=p>{</span> <span class=k>property</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>      <span class=k>property</span><span class=p>.</span><span class=n>isAccessible</span> <span class=p>=</span> <span class=k>true</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>[</span><span class=k>property</span><span class=p>.</span><span class=n>name</span><span class=p>]</span> <span class=p>=</span> <span class=k>property</span><span class=p>.</span><span class=k>get</span><span class=p>(</span><span class=k>this</span><span class=nd>@getAllKV</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=k>property</span><span class=p>.</span><span class=n>isAccessible</span> <span class=p>=</span> <span class=k>false</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=compose-编译器插件原理介绍>Compose 编译器插件原理介绍<a hidden class=anchor aria-hidden=true href=#compose-编译器插件原理介绍>#</a></h3><p><a href=https://hinchman-amanda.medium.com/reverse-engineering-the-compose-compiler-plugin-intercepting-the-frontend-657162893b11>Reverse-Engineering the Compose Compiler Plugin: Intercepting the Frontend</a></p><p>本文主要介绍了 Jetpack Compose 编译器插件如何改变 Kotlin 编译器的规则，包括在不同编译阶段的作用以及如何拦截编译行为等内容。</p><ul><li>Jetpack Compose 编译器插件与 Kotlin 编译器的关系：Jetpack Compose 编译器插件会向 IDE 发送诊断信息以提供用户反馈，通过拦截 Kotlin 编译器的代码编译和运行时行为来实现其功能。</li><li>Kotlin 编译器：着重探讨较新的 FIR 前端（k2 编译器），其通过重复编译优化数据格式。</li><li>插件架构：参考 2018 年 Kevin Most 演讲，介绍了编译器插件架构的构成部分。</li><li>Compose 插件结构：已转移到 Kotlin 仓库，分析其文件结构及前后端职责。</li><li>插件拦截功能：可在 Kotlin 编译器前后端拦截编译，以特定代码为例说明不同阶段作用。</li><li>IDE 错误提示：解析阶段后，FIR 将信息发送至 IDE 插件，提供如 “Composable main functions are not currently supported” 等实时错误提示。</li></ul><p><img loading=lazy src=https://raw.gitmirror.com/RicardoJiang/resource/refs/heads/main/2025/january/p6.webp alt></p><h2 id=社区活动>社区活动<a hidden class=anchor aria-hidden=true href=#社区活动>#</a></h2><h3 id=kotlin-中文开发者大会视频回放>Kotlin 中文开发者大会视频回放<a hidden class=anchor aria-hidden=true href=#kotlin-中文开发者大会视频回放>#</a></h3><p>Kotlin 中文开发者大会视频回放已发布，欢迎点击以下链接观看：</p><ul><li><a href=https://www.bilibili.com/video/BV1ntcJeJEBb/>腾讯视频使用 KMP Compose 适配鸿蒙的实践</a></li><li><a href=https://www.bilibili.com/video/BV1ntcJeJEsF/>BiliBili 的鸿蒙之路：从 Kotlin/JS 到 Kotlin/Native 的进化之路</a></li><li><a href=https://www.bilibili.com/video/BV1ntcJeJEYd/>快手团队的 KMP 鸿蒙落地实践</a></li><li><a href=https://www.bilibili.com/video/BV1JtcJeJEoQ/>NTCompose：一个基于 KMP 及 Compose 范式和原生渲染的多平台开发框架</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://beijing-kug.github.io/tags/%E6%8A%80%E6%9C%AF%E6%9C%88%E6%8A%A5/>技术月报</a></li></ul><nav class=paginav><a class=prev href=https://beijing-kug.github.io/news/kotlin-news-2025-02/><span class=title>« Prev</span><br><span>Kotlin 技术月报 | 2025 年 2 月</span></a>
<a class=next href=https://beijing-kug.github.io/news/kotlin-news-2024-12/><span class=title>Next »</span><br><span>Kotlin 技术月报 | 2024 年 12 月</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Kotlin 技术月报 | 2025 年 1 月 on twitter" href="https://twitter.com/intent/tweet/?text=Kotlin%20%e6%8a%80%e6%9c%af%e6%9c%88%e6%8a%a5%20%7c%202025%20%e5%b9%b4%201%20%e6%9c%88&amp;url=https%3a%2f%2fbeijing-kug.github.io%2fnews%2fkotlin-news-2025-01%2f&amp;hashtags=%e6%8a%80%e6%9c%af%e6%9c%88%e6%8a%a5"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Kotlin 技术月报 | 2025 年 1 月 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fbeijing-kug.github.io%2fnews%2fkotlin-news-2025-01%2f&amp;title=Kotlin%20%e6%8a%80%e6%9c%af%e6%9c%88%e6%8a%a5%20%7c%202025%20%e5%b9%b4%201%20%e6%9c%88&amp;summary=Kotlin%20%e6%8a%80%e6%9c%af%e6%9c%88%e6%8a%a5%20%7c%202025%20%e5%b9%b4%201%20%e6%9c%88&amp;source=https%3a%2f%2fbeijing-kug.github.io%2fnews%2fkotlin-news-2025-01%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Kotlin 技术月报 | 2025 年 1 月 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fbeijing-kug.github.io%2fnews%2fkotlin-news-2025-01%2f&title=Kotlin%20%e6%8a%80%e6%9c%af%e6%9c%88%e6%8a%a5%20%7c%202025%20%e5%b9%b4%201%20%e6%9c%88"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Kotlin 技术月报 | 2025 年 1 月 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fbeijing-kug.github.io%2fnews%2fkotlin-news-2025-01%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Kotlin 技术月报 | 2025 年 1 月 on whatsapp" href="https://api.whatsapp.com/send?text=Kotlin%20%e6%8a%80%e6%9c%af%e6%9c%88%e6%8a%a5%20%7c%202025%20%e5%b9%b4%201%20%e6%9c%88%20-%20https%3a%2f%2fbeijing-kug.github.io%2fnews%2fkotlin-news-2025-01%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Kotlin 技术月报 | 2025 年 1 月 on telegram" href="https://telegram.me/share/url?text=Kotlin%20%e6%8a%80%e6%9c%af%e6%9c%88%e6%8a%a5%20%7c%202025%20%e5%b9%b4%201%20%e6%9c%88&amp;url=https%3a%2f%2fbeijing-kug.github.io%2fnews%2fkotlin-news-2025-01%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://beijing-kug.github.io/>北京 KUG</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>